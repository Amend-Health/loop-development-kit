# Loop Development Kit (LDK) for Go

## Installation

```shell
go get -u github.com/open-olive/loop-development-kit/ldk/go
```

## Usage

Full documentation available on [pkg.go.dev](https://pkg.go.dev/github.com/open-olive/loop-development-kit/ldk/go).

### Loops
This LDK can be used to write loops for Olive Helps. More detail about loops is available [here](docs/loops.md).

Example loops are available in the examples folder.

### Running Locally

#### Local Plugin Command (Recommended)

Olive Helps lets you add a local command as Local Plugins:

1. Open Olive Helps.
2. Open the Loop Library:
   1. Click the Hamburger icon.
   2. Click Loop Library.
3. Click the Install Local Plugin button:
4. Select the working directory for the command.
5. Enter the command to be executed, including any arguments.
6. Click Install.

The command will be installed as a plugin. If you need to change the command or its arguments you'll need remove it and then add the new commands. If you are developing locally, it can be helpful to give it the `go run` command, as this will remove the need to recompile each time to check your changes:

```sh
go run main.go
```

Be sure that when you selected the working directory in `Step 5` that it is the root of your project that has the `main.go` file located in it.

### Troubleshooting and Debugging

Olive Helps logs are available in the following directories for your OS:

```shell
~/Library/Logs/Olive\ Helps   # MacOS
/var/log/Olive\ Helps         # Linux
%AppData%\Olive Helps\Logs\   # Windows
```

#### Tailing Logs

It can be useful to tail the log as you develop to see any errors, warnings, or info messages.  To do so, you can issue any of the following commands:

##### Linux

```sh
tail -F /var/log/Olive\ Helps/*.log
```

##### Mac

```sh
tail -F ~/Library/Logs/Olive\ Helps/*.log
```

##### Windows

From `Powershell` (not a cmd shell):

```powershell
Get-Content $env:AppData\Olive Helps\Logs\Olive Helps-2020.08.12-1dcc37a.log -Tail 10 â€“Wait
```

Note: File names may differ from the examples above.

## Development

### protoc
The LDK utilizes `protoc` to create the `protobuf` that defines the contract that is utilized by GRPC.

* Install protobuf with Homebrew `brew link protobuf`
* Make your changes to `proto/ldk.proto`
* Then generate the new protobuf file with `make proto/ldk.pb.go`

Since `proto/ldk.pb.go` is auto-generated, do not edit this file directly.
